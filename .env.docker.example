# ============================================
# TCAD Scraper - Docker Environment Configuration
# ============================================
# Copy this file to .env and fill in your actual values
# This file contains Docker-specific environment variables

# ============================================
# Application Environment
# ============================================
NODE_ENV=development  # development | production
LOG_LEVEL=info        # debug | info | warn | error

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=tcad_scraper
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here

# Full connection string (auto-generated from above)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?schema=public&connection_limit=10

# ============================================
# Redis Configuration (BullMQ Queue)
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=           # Leave empty for dev, set for production

# ============================================
# Backend API Configuration
# ============================================
BACKEND_PORT=3000
HOST=0.0.0.0

# Worker Configuration
CONCURRENT_WORKERS=3      # Number of concurrent scraping workers
BATCH_SIZE=10            # Properties to process per batch

# Logging
LOG_FILES_ENABLED=false  # true for production

# ============================================
# Frontend Configuration
# ============================================
FRONTEND_PORT=80         # For production (Nginx)
FRONTEND_HTTPS_PORT=443
VITE_API_URL=http://localhost:3000  # For development

# ============================================
# TCAD Scraper API
# ============================================
TCAD_API_KEY=your_tcad_api_key_here
TCAD_BASE_URL=https://travis.prodigycad.com

# ============================================
# Authentication & Security
# ============================================
JWT_SECRET=your_very_long_random_secret_key_here_at_least_32_characters
JWT_EXPIRES_IN=24h

# API Key for external access (optional)
API_KEY=your_api_key_here

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000    # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# AI Integration (Anthropic Claude)
# ============================================
ANTHROPIC_API_KEY=sk-ant-your-api-key-here

# ============================================
# Monitoring & Metrics
# ============================================
BULLMQ_METRICS_PORT=4000

# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_grafana_password_here
GRAFANA_ROOT_URL=http://localhost:3001
GRAFANA_SECRET_KEY=your_grafana_secret_key_here

# ============================================
# Error Tracking (Sentry)
# ============================================
SENTRY_DSN=                # Optional: Add your Sentry DSN for error tracking
SENTRY_ENVIRONMENT=development

# ============================================
# Doppler Integration (Optional)
# ============================================
# If using Doppler for secrets management:
# DOPPLER_TOKEN=your_doppler_token_here

# ============================================
# Docker Compose Overrides
# ============================================
# These are used by docker-compose files

# Service scaling
BACKEND_REPLICAS=1
FRONTEND_REPLICAS=1

# Resource limits (for production)
BACKEND_MEMORY_LIMIT=4G
FRONTEND_MEMORY_LIMIT=512M
POSTGRES_MEMORY_LIMIT=2G
REDIS_MEMORY_LIMIT=1G
