This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
features/
  PropertySearch/
    ExampleQueries.module.css
    ExampleQueries.tsx
    index.ts
    PropertyCard.module.css
    PropertyCard.tsx
    PropertySearchContainer.module.css
    PropertySearchContainer.tsx
    SearchBox.module.css
    SearchBox.tsx
    SearchResults.module.css
    SearchResults.tsx
ui/
  Badge/
    Badge.module.css
    Badge.tsx
    index.ts
  Button/
    Button.module.css
    Button.tsx
    index.ts
  Card/
    Card.module.css
    Card.tsx
    index.ts
  Icon/
    Icon.tsx
    icons.ts
    index.ts
  Input/
    index.ts
    Input.module.css
    Input.tsx
  index.ts
Analytics.css
Analytics.tsx
Charts.css
Charts.tsx
ErrorBoundary.tsx
Filters.css
Filters.tsx
PropertySearch.css
PropertySearch.tsx
PropertyTable.css
PropertyTable.tsx
README.md
ScrapeManager.css
ScrapeManager.tsx
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="features/PropertySearch/ExampleQueries.module.css">
.container {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.75rem;
  margin-top: 1rem;
}

.label {
  font-size: 0.875rem;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
}

.chips {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.chip {
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 20px;
  color: white;
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
}

.chip:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.3);
  border-color: rgba(255, 255, 255, 0.5);
  transform: translateY(-2px);
}

.chip:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
</file>

<file path="features/PropertySearch/ExampleQueries.tsx">
import { useAnalytics } from '../../../hooks';
import { EXAMPLE_QUERIES } from '../../../utils/constants';
import styles from './ExampleQueries.module.css';

interface ExampleQueriesProps {
  onSelectQuery: (query: string) => void;
  disabled?: boolean;
}

export const ExampleQueries = ({
  onSelectQuery,
  disabled = false,
}: ExampleQueriesProps) => {
  const { logExampleQueryClick } = useAnalytics();

  const handleQueryClick = (query: string) => {
    logExampleQueryClick(query);
    onSelectQuery(query);
  };

  return (
    <div className={styles.container}>
      <span className={styles.label}>Try:</span>
      <div className={styles.chips}>
        {EXAMPLE_QUERIES.map((example, idx) => (
          <button
            key={idx}
            onClick={() => handleQueryClick(example)}
            className={styles.chip}
            disabled={disabled}
          >
            {example}
          </button>
        ))}
      </div>
    </div>
  );
};
</file>

<file path="features/PropertySearch/index.ts">
export { PropertySearchContainer } from './PropertySearchContainer';
export { PropertyCard } from './PropertyCard';
export { SearchBox } from './SearchBox';
export { ExampleQueries } from './ExampleQueries';
export { SearchResults } from './SearchResults';
</file>

<file path="features/PropertySearch/PropertyCard.module.css">
.card {
  height: 100%;
  transition: all 0.2s ease;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1rem;
}

.owner {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--neutral-900, #111827);
  margin: 0;
  flex: 1;
}

.address {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  color: var(--neutral-600, #4b5563);
  margin-bottom: 1rem;
}

.details {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.detailItem {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 1px solid var(--neutral-100, #f3f4f6);
}

.detailItem:last-child {
  border-bottom: none;
}

.detailLabel {
  font-size: 0.875rem;
  color: var(--neutral-600, #4b5563);
}

.detailValue {
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--neutral-900, #111827);
}

.mono {
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', monospace;
  font-size: 0.8125rem;
}
</file>

<file path="features/PropertySearch/PropertyCard.tsx">
import { useEffect } from 'react';
import { Property } from '../../../types';
import { useFormatting, useAnalytics } from '../../../hooks';
import { Card, CardHeader, CardBody } from '../../ui/Card';
import { Badge } from '../../ui/Badge';
import { Icon } from '../../ui/Icon';
import styles from './PropertyCard.module.css';

interface PropertyCardProps {
  property: Property;
}

export const PropertyCard = ({ property }: PropertyCardProps) => {
  const { formatCurrency } = useFormatting();
  const { logPropertyView } = useAnalytics();

  // Track property view when card is rendered
  useEffect(() => {
    logPropertyView(property.property_id, property.property_address);
  }, [property.property_id, property.property_address, logPropertyView]);

  return (
    <Card variant="elevated" className={styles.card}>
      <CardHeader>
        <div className={styles.header}>
          <h3 className={styles.owner}>{property.name}</h3>
          <Badge variant="info" size="sm">
            {property.prop_type}
          </Badge>
        </div>
      </CardHeader>

      <CardBody>
        <div className={styles.address}>
          <Icon name="location" size={14} />
          {property.property_address}
          {property.city && `, ${property.city}`}
        </div>

        <div className={styles.details}>
          <div className={styles.detailItem}>
            <span className={styles.detailLabel}>Appraised Value</span>
            <span className={styles.detailValue}>
              {formatCurrency(property.appraised_value)}
            </span>
          </div>

          {property.assessed_value && (
            <div className={styles.detailItem}>
              <span className={styles.detailLabel}>Assessed Value</span>
              <span className={styles.detailValue}>
                {formatCurrency(property.assessed_value)}
              </span>
            </div>
          )}

          <div className={styles.detailItem}>
            <span className={styles.detailLabel}>Property ID</span>
            <span className={`${styles.detailValue} ${styles.mono}`}>
              {property.property_id}
            </span>
          </div>
        </div>
      </CardBody>
    </Card>
  );
};
</file>

<file path="features/PropertySearch/PropertySearchContainer.module.css">
.container {
  min-height: 100vh;
  background: linear-gradient(to bottom, #f9fafb 0%, white 50%);
}

.hero {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 4rem 2rem;
  color: white;
}

.header {
  max-width: 1200px;
  margin: 0 auto 3rem;
  text-align: center;
}

.header h1 {
  font-size: 3.5rem;
  font-weight: 800;
  margin: 0 0 1rem;
  line-height: 1.2;
}

.subtitle {
  font-size: 1.25rem;
  opacity: 0.95;
  margin: 0;
}

.searchContainer {
  max-width: 900px;
  margin: 0 auto;
}

@media (max-width: 768px) {
  .hero {
    padding: 3rem 1.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .subtitle {
    font-size: 1rem;
  }
}

@media (max-width: 640px) {
  .hero {
    padding: 2rem 1rem;
  }

  .header h1 {
    font-size: 1.75rem;
  }
}
</file>

<file path="features/PropertySearch/PropertySearchContainer.tsx">
import { useState, useEffect } from 'react';
import { usePropertySearch, useAnalytics } from '../../../hooks';
import { SearchBox } from './SearchBox';
import { ExampleQueries } from './ExampleQueries';
import { SearchResults } from './SearchResults';
import styles from './PropertySearchContainer.module.css';

export const PropertySearchContainer = () => {
  const { results, loading, error, totalResults, explanation, search } =
    usePropertySearch();
  const { logSearch, logSearchResults, logError } = useAnalytics();
  const [searchQuery, setSearchQuery] = useState('');

  const handleSearch = async (query: string) => {
    setSearchQuery(query);

    // Track search initiation
    logSearch(query);

    await search(query);
  };

  // Track search results when they change
  useEffect(() => {
    if (results.length > 0 && searchQuery) {
      logSearchResults(searchQuery, totalResults, !!explanation);
    }
  }, [results, totalResults, explanation, searchQuery, logSearchResults]);

  // Track errors
  useEffect(() => {
    if (error) {
      logError(error, 'property_search');
    }
  }, [error, logError]);

  return (
    <div className={styles.container}>
      <div className={styles.hero}>
        <div className={styles.header}>
          <h1>TCAD Property Explorer</h1>
          <p className={styles.subtitle}>
            Search 122,000+ Travis County properties using natural language
          </p>
        </div>

        <div className={styles.searchContainer}>
          <SearchBox onSearch={handleSearch} loading={loading} />
          <ExampleQueries
            onSelectQuery={handleSearch}
            disabled={loading}
          />
        </div>
      </div>

      <SearchResults
        results={results}
        totalResults={totalResults}
        explanation={explanation}
        error={error}
        loading={loading}
        searchQuery={searchQuery}
      />
    </div>
  );
};
</file>

<file path="features/PropertySearch/SearchBox.module.css">
.searchBox {
  position: relative;
  display: flex;
  align-items: center;
  background: white;
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
  overflow: hidden;
  transition: all 0.3s ease;
}

.searchBox:focus-within {
  box-shadow: 0 10px 60px rgba(0, 0, 0, 0.2);
  transform: translateY(-2px);
}

.searchIcon {
  position: absolute;
  left: 1.5rem;
  display: flex;
  align-items: center;
  color: var(--neutral-400, #9ca3af);
  pointer-events: none;
}

.searchInput {
  flex: 1;
  padding: 1.25rem 1.5rem 1.25rem 4rem;
  border: none;
  font-size: 1rem;
  line-height: 1.5rem;
  color: var(--neutral-900, #111827);
  background: transparent;
}

.searchInput:focus {
  outline: none;
}

.searchInput::placeholder {
  color: var(--neutral-400, #9ca3af);
}

.searchInput:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

@media (max-width: 640px) {
  .searchBox {
    flex-direction: column;
    align-items: stretch;
  }

  .searchInput {
    padding-right: 1.5rem;
  }

  .searchBox button {
    border-radius: 0;
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
  }
}
</file>

<file path="features/PropertySearch/SearchBox.tsx">
import { useState, KeyboardEvent } from 'react';
import { Button } from '../../ui/Button';
import { Icon } from '../../ui/Icon';
import styles from './SearchBox.module.css';

interface SearchBoxProps {
  onSearch: (query: string) => void;
  loading?: boolean;
  placeholder?: string;
}

export const SearchBox = ({
  onSearch,
  loading = false,
  placeholder = "Ask anything... e.g., 'properties in Austin worth over $500k'",
}: SearchBoxProps) => {
  const [query, setQuery] = useState('');

  const handleSearch = () => {
    if (query.trim()) {
      onSearch(query);
    }
  };

  const handleKeyPress = (e: KeyboardEvent<HTMLInputElement>) => {
    if (e.key === 'Enter') {
      handleSearch();
    }
  };

  return (
    <div className={styles.searchBox}>
      <div className={styles.searchIcon}>
        <Icon name="search" />
      </div>
      <input
        type="text"
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        onKeyPress={handleKeyPress}
        placeholder={placeholder}
        className={styles.searchInput}
        disabled={loading}
      />
      <Button
        onClick={handleSearch}
        disabled={loading || !query.trim()}
        variant="primary"
      >
        {loading ? 'Searching...' : 'Search'}
      </Button>
    </div>
  );
};
</file>

<file path="features/PropertySearch/SearchResults.module.css">
.container {
  margin-top: 3rem;
}

.explanation {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  background: var(--neutral-50, #f9fafb);
  border-left: 4px solid var(--primary, #2563eb);
  border-radius: 8px;
  margin-bottom: 2rem;
  font-size: 0.875rem;
  color: var(--neutral-700, #374151);
}

.explanationIcon {
  display: flex;
  align-items: center;
  color: var(--primary, #2563eb);
}

.resultCount {
  margin-left: auto;
  font-weight: 600;
  color: var(--primary, #2563eb);
}

.resultsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
}

.loadMore {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  margin-top: 3rem;
  padding: 2rem;
  text-align: center;
}

.loadMore p {
  margin: 0;
  color: var(--neutral-600, #4b5563);
}

.errorMessage {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 1.5rem;
  background: #fee2e2;
  color: #991b1b;
  border-radius: 8px;
  margin-top: 2rem;
}

.noResults {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 4rem 2rem;
  text-align: center;
  color: var(--neutral-500, #6b7280);
}

.noResults h3 {
  margin: 1rem 0 0.5rem;
  color: var(--neutral-700, #374151);
}

.noResults p {
  margin: 0;
}

@media (max-width: 640px) {
  .resultsGrid {
    grid-template-columns: 1fr;
  }
}
</file>

<file path="features/PropertySearch/SearchResults.tsx">
import { Property } from '../../../types';
import { PropertyCard } from './PropertyCard';
import { Icon } from '../../ui/Icon';
import { Button } from '../../ui/Button';
import styles from './SearchResults.module.css';

interface SearchResultsProps {
  results: Property[];
  totalResults: number;
  explanation?: string;
  error?: string;
  loading?: boolean;
  searchQuery?: string;
  onLoadMore?: () => void;
}

export const SearchResults = ({
  results,
  totalResults,
  explanation,
  error,
  loading,
  searchQuery,
  onLoadMore,
}: SearchResultsProps) => {
  if (error) {
    return (
      <div className={styles.errorMessage}>
        <Icon name="alertCircle" />
        <div>
          <strong>Error:</strong> {error}
        </div>
      </div>
    );
  }

  if (!loading && results.length === 0 && searchQuery) {
    return (
      <div className={styles.noResults}>
        <Icon name="search" size={48} />
        <h3>No properties found</h3>
        <p>Try adjusting your search query or using one of the examples above</p>
      </div>
    );
  }

  if (results.length === 0) {
    return null;
  }

  return (
    <div className={styles.container}>
      {explanation && (
        <div className={styles.explanation}>
          <div className={styles.explanationIcon}>
            <Icon name="chevronRight" size={16} />
          </div>
          <span>{explanation}</span>
          <span className={styles.resultCount}>({totalResults} results)</span>
        </div>
      )}

      <div className={styles.resultsGrid}>
        {results.map((property) => (
          <PropertyCard key={property.id} property={property} />
        ))}
      </div>

      {results.length < totalResults && onLoadMore && (
        <div className={styles.loadMore}>
          <p>
            Showing {results.length} of {totalResults} results
          </p>
          <Button onClick={onLoadMore} variant="outline">
            Load More
          </Button>
        </div>
      )}
    </div>
  );
};
</file>

<file path="ui/Badge/Badge.module.css">
.badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  font-weight: 600;
  white-space: nowrap;
}

/* Sizes */
.sm {
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  line-height: 1rem;
}

.md {
  padding: 0.375rem 0.75rem;
  font-size: 0.875rem;
  line-height: 1.25rem;
}

.lg {
  padding: 0.5rem 1rem;
  font-size: 1rem;
  line-height: 1.5rem;
}

/* Variants */
.default {
  background: var(--neutral-100, #f3f4f6);
  color: var(--neutral-700, #374151);
}

.success {
  background: #d1fae5;
  color: #065f46;
}

.warning {
  background: #fef3c7;
  color: #92400e;
}

.error {
  background: #fee2e2;
  color: #991b1b;
}

.info {
  background: #dbeafe;
  color: #1e40af;
}
</file>

<file path="ui/Badge/Badge.tsx">
import { ReactNode } from 'react';
import styles from './Badge.module.css';

type BadgeVariant = 'default' | 'success' | 'warning' | 'error' | 'info';
type BadgeSize = 'sm' | 'md' | 'lg';

interface BadgeProps {
  variant?: BadgeVariant;
  size?: BadgeSize;
  children: ReactNode;
  className?: string;
}

export const Badge = ({
  variant = 'default',
  size = 'md',
  children,
  className = '',
}: BadgeProps) => {
  const classes = [
    styles.badge,
    styles[variant],
    styles[size],
    className,
  ]
    .filter(Boolean)
    .join(' ');

  return <span className={classes}>{children}</span>;
};
</file>

<file path="ui/Badge/index.ts">
export { Badge } from './Badge';
</file>

<file path="ui/Button/Button.module.css">
.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: inherit;
  white-space: nowrap;
}

.button:focus-visible {
  outline: 2px solid var(--primary, #2563eb);
  outline-offset: 2px;
}

.button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Sizes */
.sm {
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  line-height: 1.25rem;
}

.md {
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  line-height: 1.5rem;
}

.lg {
  padding: 1rem 2rem;
  font-size: 1.125rem;
  line-height: 1.75rem;
}

/* Variants */
.primary {
  background: var(--primary, #2563eb);
  color: white;
}

.primary:hover:not(:disabled) {
  background: var(--primary-dark, #1d4ed8);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
}

.secondary {
  background: var(--neutral-200, #e5e7eb);
  color: var(--neutral-900, #111827);
}

.secondary:hover:not(:disabled) {
  background: var(--neutral-300, #d1d5db);
}

.outline {
  background: transparent;
  border: 2px solid var(--primary, #2563eb);
  color: var(--primary, #2563eb);
}

.outline:hover:not(:disabled) {
  background: var(--primary, #2563eb);
  color: white;
}

.ghost {
  background: transparent;
  color: var(--neutral-700, #374151);
}

.ghost:hover:not(:disabled) {
  background: var(--neutral-100, #f3f4f6);
}

.fullWidth {
  width: 100%;
}
</file>

<file path="ui/Button/Button.tsx">
import { ReactNode, ButtonHTMLAttributes } from 'react';
import styles from './Button.module.css';

type ButtonVariant = 'primary' | 'secondary' | 'outline' | 'ghost';
type ButtonSize = 'sm' | 'md' | 'lg';

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: ButtonVariant;
  size?: ButtonSize;
  children: ReactNode;
  fullWidth?: boolean;
}

export const Button = ({
  variant = 'primary',
  size = 'md',
  children,
  fullWidth = false,
  className = '',
  disabled,
  ...props
}: ButtonProps) => {
  const classes = [
    styles.button,
    styles[variant],
    styles[size],
    fullWidth && styles.fullWidth,
    className,
  ]
    .filter(Boolean)
    .join(' ');

  return (
    <button className={classes} disabled={disabled} {...props}>
      {children}
    </button>
  );
};
</file>

<file path="ui/Button/index.ts">
export { Button } from './Button';
</file>

<file path="ui/Card/Card.module.css">
.card {
  background: white;
  border-radius: 12px;
  transition: all 0.2s ease;
}

.default {
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.elevated {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.elevated:hover {
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
  transform: translateY(-2px);
}

.outlined {
  border: 1px solid var(--neutral-200, #e5e7eb);
  box-shadow: none;
}

/* Padding variants */
.padding-sm {
  padding: 1rem;
}

.padding-md {
  padding: 1.5rem;
}

.padding-lg {
  padding: 2rem;
}

/* Card sections */
.header {
  margin-bottom: 1rem;
}

.body {
  flex: 1;
}

.footer {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid var(--neutral-200, #e5e7eb);
}
</file>

<file path="ui/Card/Card.tsx">
import { ReactNode, HTMLAttributes } from 'react';
import styles from './Card.module.css';

type CardVariant = 'default' | 'elevated' | 'outlined';

interface CardProps extends HTMLAttributes<HTMLDivElement> {
  variant?: CardVariant;
  children: ReactNode;
  padding?: 'sm' | 'md' | 'lg';
}

export const Card = ({
  variant = 'default',
  children,
  padding = 'md',
  className = '',
  ...props
}: CardProps) => {
  const classes = [
    styles.card,
    styles[variant],
    styles[`padding-${padding}`],
    className,
  ]
    .filter(Boolean)
    .join(' ');

  return (
    <div className={classes} {...props}>
      {children}
    </div>
  );
};

interface CardHeaderProps {
  children: ReactNode;
  className?: string;
}

export const CardHeader = ({ children, className = '' }: CardHeaderProps) => {
  return <div className={`${styles.header} ${className}`}>{children}</div>;
};

interface CardBodyProps {
  children: ReactNode;
  className?: string;
}

export const CardBody = ({ children, className = '' }: CardBodyProps) => {
  return <div className={`${styles.body} ${className}`}>{children}</div>;
};

interface CardFooterProps {
  children: ReactNode;
  className?: string;
}

export const CardFooter = ({ children, className = '' }: CardFooterProps) => {
  return <div className={`${styles.footer} ${className}`}>{children}</div>;
};
</file>

<file path="ui/Card/index.ts">
export { Card, CardHeader, CardBody, CardFooter } from './Card';
</file>

<file path="ui/Icon/Icon.tsx">
import { iconPaths, IconName } from './icons';

interface IconProps {
  name: IconName;
  size?: number;
  color?: string;
  className?: string;
  'aria-hidden'?: boolean;
}

export const Icon = ({
  name,
  size = 24,
  color = 'currentColor',
  className = '',
  'aria-hidden': ariaHidden = true,
}: IconProps) => {
  const pathData = iconPaths[name];

  return (
    <svg
      width={size}
      height={size}
      viewBox="0 0 24 24"
      fill="none"
      stroke={color}
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      className={className}
      aria-hidden={ariaHidden}
    >
      <path d={pathData} />
    </svg>
  );
};
</file>

<file path="ui/Icon/icons.ts">
/**
 * SVG icon paths as string data
 * Centralizes all icon definitions
 */

export const iconPaths: Record<string, string> = {
  search: 'M11 11m-8 0a8 8 0 1 0 16 0a8 8 0 1 0 -16 0M21 21l-4.35-4.35',
  location: 'M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0zM12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0',
  chevronRight: 'M9 18l6-6l-6-6',
  calendar: 'M3 6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6zM16 2v4M8 2v4M3 10h18',
  check: 'M20 6L9 17l-5-5',
  x: 'M18 6L6 18M6 6l12 12',
  alertCircle: 'M12 12m-10 0a10 10 0 1 0 20 0a10 10 0 1 0 -20 0M12 8v4M12 16h0.01',
  info: 'M12 12m-10 0a10 10 0 1 0 20 0a10 10 0 1 0 -20 0M12 16v-4M12 8h0.01',
  arrowUp: 'M12 19V5',
  arrowDown: 'M12 5v14',
  loader: 'M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83',
  filter: 'M22 3H2l8 9.46V19l4 2V12.46L22 3z',
  download: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5l5-5M12 15V3',
  refresh: 'M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15',
};

export type IconName = keyof typeof iconPaths;
</file>

<file path="ui/Icon/index.ts">
export { Icon } from './Icon';
export { iconPaths, type IconName } from './icons';
</file>

<file path="ui/Input/index.ts">
export { Input } from './Input';
</file>

<file path="ui/Input/Input.module.css">
.inputWrapper {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.label {
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--neutral-700, #374151);
}

.inputContainer {
  position: relative;
  display: flex;
  align-items: center;
}

.input {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 1px solid var(--neutral-300, #d1d5db);
  border-radius: 8px;
  font-size: 1rem;
  line-height: 1.5rem;
  transition: all 0.2s ease;
  font-family: inherit;
}

.input:focus {
  outline: none;
  border-color: var(--primary, #2563eb);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.input.withIcon {
  padding-left: 3rem;
}

.input.error {
  border-color: #ef4444;
}

.input.error:focus {
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
}

.icon {
  position: absolute;
  left: 1rem;
  display: flex;
  align-items: center;
  color: var(--neutral-500, #6b7280);
  pointer-events: none;
}

.errorText {
  font-size: 0.875rem;
  color: #ef4444;
}

.input:disabled {
  background: var(--neutral-100, #f3f4f6);
  cursor: not-allowed;
  opacity: 0.6;
}
</file>

<file path="ui/Input/Input.tsx">
import { InputHTMLAttributes, ReactNode } from 'react';
import styles from './Input.module.css';

interface InputProps extends InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
  icon?: ReactNode;
}

export const Input = ({
  label,
  error,
  icon,
  id,
  className = '',
  ...props
}: InputProps) => {
  const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;

  return (
    <div className={`${styles.inputWrapper} ${className}`}>
      {label && (
        <label htmlFor={inputId} className={styles.label}>
          {label}
        </label>
      )}
      <div className={styles.inputContainer}>
        {icon && <div className={styles.icon}>{icon}</div>}
        <input
          id={inputId}
          className={`${styles.input} ${icon ? styles.withIcon : ''} ${
            error ? styles.error : ''
          }`}
          {...props}
        />
      </div>
      {error && <span className={styles.errorText}>{error}</span>}
    </div>
  );
};
</file>

<file path="ui/index.ts">
// UI Component Library Barrel Export
export { Icon, iconPaths, type IconName } from './Icon';
export { Button } from './Button';
export { Card, CardHeader, CardBody, CardFooter } from './Card';
export { Badge } from './Badge';
export { Input } from './Input';
</file>

<file path="Analytics.css">
.analytics {
  max-width: 1200px;
  margin: 0 auto 48px;
}

.analytics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 24px;
  margin-bottom: 32px;
}

.stat-card {
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: var(--shadow);
  transition: transform 0.2s, box-shadow 0.2s;
}

.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.stat-card.primary {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: white;
}

.stat-label {
  font-size: 0.875rem;
  font-weight: 500;
  opacity: 0.8;
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stat-card.primary .stat-label {
  opacity: 0.9;
}

.stat-value {
  font-size: 2rem;
  font-weight: 700;
  line-height: 1.2;
}

.analytics-details {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 24px;
}

.detail-card {
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: var(--shadow);
}

.detail-card h3 {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--neutral-800);
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 2px solid var(--neutral-100);
}

.detail-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
}

.detail-label {
  font-size: 0.875rem;
  color: var(--neutral-600);
  font-weight: 500;
}

.detail-value {
  font-size: 0.875rem;
  color: var(--neutral-900);
  font-weight: 600;
}

@media (max-width: 768px) {
  .analytics {
    margin-bottom: 32px;
  }

  .analytics-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .analytics-details {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .stat-card {
    padding: 20px;
  }

  .stat-value {
    font-size: 1.75rem;
  }
}
</file>

<file path="Analytics.tsx">
import { useMemo } from 'react';
import { Property } from '../types';
import './Analytics.css';

interface AnalyticsProps {
  properties: Property[];
}

function Analytics({ properties }: AnalyticsProps) {
  const stats = useMemo(() => {
    if (properties.length === 0) {
      return {
        totalProperties: 0,
        totalAppraised: 0,
        totalAssessed: 0,
        avgAppraised: 0,
        avgAssessed: 0,
        maxAppraised: 0,
        minAppraised: 0,
        propertyTypes: {},
        cities: {},
      };
    }

    const totalAppraised = properties.reduce((sum, p) => sum + p.appraised_value, 0);
    const totalAssessed = properties.reduce((sum, p) => sum + p.assessed_value, 0);
    const appraisedValues = properties.map(p => p.appraised_value).filter(v => v > 0);

    const propertyTypes: Record<string, number> = {};
    const cities: Record<string, number> = {};

    properties.forEach(p => {
      propertyTypes[p.prop_type] = (propertyTypes[p.prop_type] || 0) + 1;
      if (p.city) {
        cities[p.city] = (cities[p.city] || 0) + 1;
      }
    });

    return {
      totalProperties: properties.length,
      totalAppraised,
      totalAssessed,
      avgAppraised: totalAppraised / properties.length,
      avgAssessed: totalAssessed / properties.length,
      maxAppraised: Math.max(...appraisedValues),
      minAppraised: Math.min(...appraisedValues),
      propertyTypes,
      cities,
    };
  }, [properties]);

  const formatCurrency = (value: number) => {
    return new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    }).format(value);
  };

  const topPropertyTypes = Object.entries(stats.propertyTypes)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 5);

  const topCities = Object.entries(stats.cities)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 5);

  return (
    <div className="analytics">
      <div className="analytics-grid">
        <div className="stat-card primary">
          <div className="stat-label">Total Properties</div>
          <div className="stat-value">{stats.totalProperties.toLocaleString()}</div>
        </div>

        <div className="stat-card">
          <div className="stat-label">Total Appraised Value</div>
          <div className="stat-value">{formatCurrency(stats.totalAppraised)}</div>
        </div>

        <div className="stat-card">
          <div className="stat-label">Average Appraised Value</div>
          <div className="stat-value">{formatCurrency(stats.avgAppraised)}</div>
        </div>

        <div className="stat-card">
          <div className="stat-label">Total Assessed Value</div>
          <div className="stat-value">{formatCurrency(stats.totalAssessed)}</div>
        </div>
      </div>

      <div className="analytics-details">
        <div className="detail-card">
          <h3>Value Range</h3>
          <div className="detail-content">
            <div className="detail-item">
              <span className="detail-label">Highest Value:</span>
              <span className="detail-value">{formatCurrency(stats.maxAppraised)}</span>
            </div>
            <div className="detail-item">
              <span className="detail-label">Lowest Value:</span>
              <span className="detail-value">{formatCurrency(stats.minAppraised)}</span>
            </div>
          </div>
        </div>

        <div className="detail-card">
          <h3>Top Property Types</h3>
          <div className="detail-content">
            {topPropertyTypes.map(([type, count]) => (
              <div key={type} className="detail-item">
                <span className="detail-label">{type || 'Unknown'}:</span>
                <span className="detail-value">{count} properties</span>
              </div>
            ))}
          </div>
        </div>

        <div className="detail-card">
          <h3>Top Cities</h3>
          <div className="detail-content">
            {topCities.map(([city, count]) => (
              <div key={city} className="detail-item">
                <span className="detail-label">{city}:</span>
                <span className="detail-value">{count} properties</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
}

export default Analytics;
</file>

<file path="Charts.css">
.charts {
  max-width: 1200px;
  margin: 0 auto 32px;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}

.chart-card {
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: var(--shadow);
}

.chart-card.full-width {
  grid-column: 1 / -1;
}

.chart-card h3 {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--neutral-800);
  margin-bottom: 20px;
  padding-bottom: 12px;
  border-bottom: 2px solid var(--neutral-100);
}

.chart-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.bar-group {
  display: grid;
  grid-template-columns: 120px 1fr;
  align-items: center;
  gap: 12px;
}

.bar-label {
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--neutral-700);
  text-align: right;
}

.bar-container {
  background-color: var(--neutral-100);
  border-radius: 6px;
  overflow: hidden;
  height: 32px;
  position: relative;
}

.bar {
  height: 100%;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 0 12px;
  min-width: 60px;
  transition: width 0.6s ease;
  position: relative;
}

.bar.secondary {
  background: linear-gradient(135deg, var(--secondary) 0%, #059669 100%);
}

.bar.accent {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
}

.bar-value {
  color: white;
  font-size: 0.75rem;
  font-weight: 600;
  white-space: nowrap;
}

@media (max-width: 968px) {
  .charts {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 640px) {
  .charts {
    gap: 16px;
  }

  .chart-card {
    padding: 20px;
  }

  .bar-group {
    grid-template-columns: 90px 1fr;
    gap: 8px;
  }

  .bar-label {
    font-size: 0.8125rem;
  }

  .bar-container {
    height: 28px;
  }

  .bar {
    min-width: 50px;
    padding: 0 8px;
  }
}
</file>

<file path="Charts.tsx">
import { useMemo } from 'react';
import { Property } from '../types';
import './Charts.css';

interface ChartsProps {
  properties: Property[];
}

function Charts({ properties }: ChartsProps) {
  const valueDistribution = useMemo(() => {
    const ranges = [
      { label: '$0-100k', min: 0, max: 100000, count: 0 },
      { label: '$100k-250k', min: 100000, max: 250000, count: 0 },
      { label: '$250k-500k', min: 250000, max: 500000, count: 0 },
      { label: '$500k-1M', min: 500000, max: 1000000, count: 0 },
      { label: '$1M+', min: 1000000, max: Infinity, count: 0 },
    ];

    properties.forEach(p => {
      const range = ranges.find(r => p.appraised_value >= r.min && p.appraised_value < r.max);
      if (range) range.count++;
    });

    const maxCount = Math.max(...ranges.map(r => r.count));

    return ranges.map(r => ({
      ...r,
      percentage: maxCount > 0 ? (r.count / maxCount) * 100 : 0,
    }));
  }, [properties]);

  const propertyTypeDistribution = useMemo(() => {
    const types: Record<string, number> = {};

    properties.forEach(p => {
      types[p.prop_type] = (types[p.prop_type] || 0) + 1;
    });

    const sorted = Object.entries(types)
      .map(([type, count]) => ({ type, count }))
      .sort((a, b) => b.count - a.count)
      .slice(0, 8);

    const maxCount = Math.max(...sorted.map(t => t.count));

    return sorted.map(t => ({
      ...t,
      percentage: maxCount > 0 ? (t.count / maxCount) * 100 : 0,
    }));
  }, [properties]);

  const cityDistribution = useMemo(() => {
    const cities: Record<string, { count: number; totalValue: number }> = {};

    properties.forEach(p => {
      if (p.city) {
        if (!cities[p.city]) {
          cities[p.city] = { count: 0, totalValue: 0 };
        }
        cities[p.city].count++;
        cities[p.city].totalValue += p.appraised_value;
      }
    });

    const sorted = Object.entries(cities)
      .map(([city, data]) => ({
        city,
        count: data.count,
        avgValue: data.totalValue / data.count,
      }))
      .sort((a, b) => b.count - a.count)
      .slice(0, 10);

    const maxCount = Math.max(...sorted.map(c => c.count));

    return sorted.map(c => ({
      ...c,
      percentage: maxCount > 0 ? (c.count / maxCount) * 100 : 0,
    }));
  }, [properties]);

  return (
    <div className="charts">
      <div className="chart-card">
        <h3>Property Value Distribution</h3>
        <div className="chart-content">
          {valueDistribution.map(range => (
            <div key={range.label} className="bar-group">
              <div className="bar-label">{range.label}</div>
              <div className="bar-container">
                <div
                  className="bar"
                  style={{ width: `${range.percentage}%` }}
                >
                  <span className="bar-value">{range.count}</span>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      <div className="chart-card">
        <h3>Top Property Types</h3>
        <div className="chart-content">
          {propertyTypeDistribution.map(type => (
            <div key={type.type} className="bar-group">
              <div className="bar-label">{type.type}</div>
              <div className="bar-container">
                <div
                  className="bar secondary"
                  style={{ width: `${type.percentage}%` }}
                >
                  <span className="bar-value">{type.count}</span>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      <div className="chart-card full-width">
        <h3>Properties by City</h3>
        <div className="chart-content">
          {cityDistribution.map(city => (
            <div key={city.city} className="bar-group">
              <div className="bar-label">{city.city}</div>
              <div className="bar-container">
                <div
                  className="bar accent"
                  style={{ width: `${city.percentage}%` }}
                >
                  <span className="bar-value">{city.count}</span>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

export default Charts;
</file>

<file path="ErrorBoundary.tsx">
import { Component, ReactNode, ErrorInfo } from 'react';
import { trackError } from '../lib/analytics';

interface ErrorBoundaryProps {
  children: ReactNode;
  fallback?: ReactNode;
}

interface ErrorBoundaryState {
  hasError: boolean;
  error: Error | null;
}

export class ErrorBoundary extends Component<
  ErrorBoundaryProps,
  ErrorBoundaryState
> {
  constructor(props: ErrorBoundaryProps) {
    super(props);
    this.state = {
      hasError: false,
      error: null,
    };
  }

  static getDerivedStateFromError(error: Error): ErrorBoundaryState {
    return {
      hasError: true,
      error,
    };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {
    // Track error to analytics
    trackError(error.message, 'error_boundary', {
      componentStack: errorInfo.componentStack,
      errorName: error.name,
    });

    // Log to console in development
    if (import.meta.env.DEV) {
      console.error('ErrorBoundary caught error:', error, errorInfo);
    }
  }

  render(): ReactNode {
    if (this.state.hasError) {
      // Show custom fallback UI if provided
      if (this.props.fallback) {
        return this.props.fallback;
      }

      // Default error UI
      return (
        <div
          style={{
            padding: '2rem',
            textAlign: 'center',
            maxWidth: '600px',
            margin: '4rem auto',
          }}
        >
          <h1 style={{ fontSize: '1.5rem', marginBottom: '1rem' }}>
            Something went wrong
          </h1>
          <p style={{ color: '#666', marginBottom: '1.5rem' }}>
            We've been notified about this error and will fix it as soon as
            possible.
          </p>
          <button
            onClick={() => window.location.reload()}
            style={{
              padding: '0.75rem 1.5rem',
              backgroundColor: '#007bff',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
              fontSize: '1rem',
            }}
          >
            Reload Page
          </button>
        </div>
      );
    }

    return this.props.children;
  }
}
</file>

<file path="Filters.css">
.filters {
  max-width: 1200px;
  margin: 0 auto 32px;
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: var(--shadow);
}

.filters-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.filters-header h2 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--neutral-800);
}

.reset-btn {
  padding: 8px 16px;
  background-color: var(--neutral-100);
  color: var(--neutral-700);
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s;
}

.reset-btn:hover {
  background-color: var(--neutral-200);
}

.filters-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.filter-group label {
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--neutral-700);
}

.filter-group input,
.filter-group select {
  padding: 10px 12px;
  border: 1px solid var(--neutral-300);
  border-radius: 6px;
  font-size: 0.875rem;
  color: var(--neutral-900);
  background-color: white;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.filter-group input:focus,
.filter-group select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.filter-group input::placeholder {
  color: var(--neutral-400);
}

@media (max-width: 768px) {
  .filters {
    padding: 20px;
    margin-bottom: 24px;
  }

  .filters-grid {
    grid-template-columns: 1fr;
  }
}
</file>

<file path="Filters.tsx">
import { useState, useMemo } from 'react';
import { Property } from '../types';
import './Filters.css';

interface FiltersProps {
  properties: Property[];
  onFilterChange: (filtered: Property[]) => void;
}

interface FilterState {
  searchTerm: string;
  selectedCity: string;
  selectedType: string;
  minValue: string;
  maxValue: string;
}

const initialFilterState: FilterState = {
  searchTerm: '',
  selectedCity: '',
  selectedType: '',
  minValue: '',
  maxValue: '',
};

function applyFilters(properties: Property[], filters: FilterState): Property[] {
  return properties.filter(property => {
    // Search filter
    if (filters.searchTerm) {
      const term = filters.searchTerm.toLowerCase();
      const matchesSearch =
        property.name.toLowerCase().includes(term) ||
        property.property_address.toLowerCase().includes(term) ||
        property.property_id.toLowerCase().includes(term) ||
        (property.description && property.description.toLowerCase().includes(term));

      if (!matchesSearch) return false;
    }

    // City filter
    if (filters.selectedCity && property.city !== filters.selectedCity) {
      return false;
    }

    // Property type filter
    if (filters.selectedType && property.prop_type !== filters.selectedType) {
      return false;
    }

    // Min value filter
    if (filters.minValue) {
      const min = parseFloat(filters.minValue);
      if (property.appraised_value < min) return false;
    }

    // Max value filter
    if (filters.maxValue) {
      const max = parseFloat(filters.maxValue);
      if (property.appraised_value > max) return false;
    }

    return true;
  });
}

function Filters({ properties, onFilterChange }: FiltersProps) {
  const [filters, setFilters] = useState<FilterState>(initialFilterState);

  const cities = useMemo(() => {
    const citySet = new Set(properties.map(p => p.city).filter(Boolean));
    return Array.from(citySet).sort();
  }, [properties]);

  const propertyTypes = useMemo(() => {
    const typeSet = new Set(properties.map(p => p.prop_type).filter(Boolean));
    return Array.from(typeSet).sort();
  }, [properties]);

  const filteredProperties = useMemo(() => {
    const filtered = applyFilters(properties, filters);
    onFilterChange(filtered);
    return filtered;
  }, [properties, filters, onFilterChange]);

  const updateFilter = <K extends keyof FilterState>(key: K, value: FilterState[K]) => {
    setFilters(prev => ({ ...prev, [key]: value }));
  };

  const handleReset = () => {
    setFilters(initialFilterState);
  };

  const hasActiveFilters = Object.values(filters).some(value => value !== '');

  return (
    <div className="filters">
      <div className="filters-header">
        <h2>Filter & Search</h2>
        {hasActiveFilters && (
          <button className="reset-btn" onClick={handleReset}>
            Reset All
          </button>
        )}
      </div>

      <div className="filters-grid">
        <div className="filter-group">
          <label htmlFor="search">Search</label>
          <input
            id="search"
            type="text"
            placeholder="Search by name, address, or property ID..."
            value={filters.searchTerm}
            onChange={(e) => updateFilter('searchTerm', e.target.value)}
          />
        </div>

        <div className="filter-group">
          <label htmlFor="city">City</label>
          <select
            id="city"
            value={filters.selectedCity}
            onChange={(e) => updateFilter('selectedCity', e.target.value)}
          >
            <option value="">All Cities</option>
            {cities.map(city => (
              <option key={city} value={city}>{city}</option>
            ))}
          </select>
        </div>

        <div className="filter-group">
          <label htmlFor="type">Property Type</label>
          <select
            id="type"
            value={filters.selectedType}
            onChange={(e) => updateFilter('selectedType', e.target.value)}
          >
            <option value="">All Types</option>
            {propertyTypes.map(type => (
              <option key={type} value={type}>{type}</option>
            ))}
          </select>
        </div>

        <div className="filter-group">
          <label htmlFor="minValue">Min Appraised Value</label>
          <input
            id="minValue"
            type="number"
            placeholder="0"
            value={filters.minValue}
            onChange={(e) => updateFilter('minValue', e.target.value)}
          />
        </div>

        <div className="filter-group">
          <label htmlFor="maxValue">Max Appraised Value</label>
          <input
            id="maxValue"
            type="number"
            placeholder="No limit"
            value={filters.maxValue}
            onChange={(e) => updateFilter('maxValue', e.target.value)}
          />
        </div>
      </div>
    </div>
  );
}

export default Filters;
</file>

<file path="PropertySearch.css">
.property-search {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.search-hero {
  padding: 4rem 2rem;
  max-width: 1200px;
  margin: 0 auto;
}

.search-header {
  text-align: center;
  margin-bottom: 3rem;
}

.search-header h1 {
  font-size: 3.5rem;
  font-weight: 800;
  color: white;
  margin: 0 0 1rem 0;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.subtitle {
  font-size: 1.25rem;
  color: rgba(255, 255, 255, 0.9);
  margin: 0;
}

.search-container {
  max-width: 800px;
  margin: 0 auto;
}

.search-box {
  display: flex;
  align-items: center;
  background: white;
  border-radius: 16px;
  padding: 8px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
}

.search-box:focus-within {
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
  transform: translateY(-2px);
}

.search-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 1rem;
  color: #667eea;
}

.search-input {
  flex: 1;
  border: none;
  outline: none;
  font-size: 1.125rem;
  padding: 1rem 0.5rem;
  color: #1a202c;
}

.search-input::placeholder {
  color: #a0aec0;
}

.search-button {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  padding: 1rem 2rem;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap;
}

.search-button:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
}

.search-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.example-queries {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 1.5rem;
  align-items: center;
}

.example-label {
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  margin-right: 0.5rem;
}

.example-chip {
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.example-chip:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.3);
  transform: translateY(-2px);
}

.example-chip:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.search-explanation {
  background: white;
  padding: 1rem 1.5rem;
  border-radius: 12px;
  margin: 2rem auto;
  max-width: 1200px;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.explanation-icon {
  color: #667eea;
  display: flex;
}

.result-count {
  margin-left: auto;
  color: #718096;
  font-weight: 500;
}

.error-message {
  background: #fed7d7;
  color: #c53030;
  padding: 1rem 1.5rem;
  border-radius: 12px;
  margin: 2rem auto;
  max-width: 1200px;
}

.results-section {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem 4rem;
}

.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.property-card {
  background: white;
  border-radius: 16px;
  padding: 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.property-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.property-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1rem;
  margin-bottom: 1rem;
}

.property-owner {
  font-size: 1.25rem;
  font-weight: 700;
  color: #1a202c;
  margin: 0;
  flex: 1;
}

.property-type-badge {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 600;
  white-space: nowrap;
}

.property-address {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #718096;
  font-size: 0.9375rem;
  margin-bottom: 1.25rem;
}

.property-details {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem;
  background: #f7fafc;
  border-radius: 8px;
}

.detail-label {
  font-size: 0.875rem;
  color: #718096;
  font-weight: 500;
}

.detail-value {
  font-weight: 700;
  color: #1a202c;
}

.detail-value.mono {
  font-family: 'Courier New', monospace;
  font-size: 0.875rem;
}

.load-more {
  text-align: center;
  padding: 2rem 0;
}

.load-more p {
  color: white;
  margin-bottom: 1rem;
}

.load-more-button {
  background: white;
  color: #667eea;
  border: none;
  padding: 0.875rem 2rem;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.load-more-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(255, 255, 255, 0.2);
}

.no-results {
  text-align: center;
  padding: 4rem 2rem;
  color: white;
}

.no-results svg {
  opacity: 0.5;
  margin-bottom: 1rem;
}

.no-results h3 {
  font-size: 1.5rem;
  margin: 0 0 0.5rem 0;
}

.no-results p {
  color: rgba(255, 255, 255, 0.8);
  margin: 0;
}

@media (max-width: 768px) {
  .search-header h1 {
    font-size: 2.5rem;
  }

  .search-box {
    flex-direction: column;
    gap: 0.5rem;
  }

  .search-input {
    width: 100%;
  }

  .search-button {
    width: 100%;
  }

  .results-grid {
    grid-template-columns: 1fr;
  }
}
</file>

<file path="PropertySearch.tsx">
import { useState, useMemo } from 'react';
import { Property } from '../types';
import { getApiBaseUrl } from '../lib/api-config';
import './PropertySearch.css';

interface SearchResult {
  data: Property[];
  pagination: {
    total: number;
    limit: number;
    offset: number;
    hasMore: boolean;
  };
  query?: {
    original: string;
    explanation: string;
  };
}

export default function PropertySearch() {
  // Load API URL from secure server-passed configuration
  const apiBaseUrl = useMemo(() => getApiBaseUrl(), []);

  const [searchQuery, setSearchQuery] = useState('');
  const [results, setResults] = useState<Property[]>([]);
  const [loading, setLoading] = useState(false);
  const [explanation, setExplanation] = useState('');
  const [error, setError] = useState('');
  const [totalResults, setTotalResults] = useState(0);

  const exampleQueries = [
    'properties in Austin worth over $500k',
    'commercial properties owned by Smith',
    'show me the most expensive residential properties',
    'properties on Congress Ave',
    'find properties appraised between $300k and $600k',
  ];

  const handleSearch = async (query?: string) => {
    const searchText = query || searchQuery;
    if (!searchText.trim()) return;

    setLoading(true);
    setError('');

    try {
      const response = await fetch(`${apiBaseUrl}/properties/search`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ query: searchText, limit: 50 }),
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() => ({ message: 'Search failed' }));
        throw new Error(errorData.message || 'Search failed');
      }

      const data: SearchResult = await response.json();

      if (!data || !data.data || !data.pagination) {
        throw new Error('Received invalid data from server');
      }

      setResults(data.data);
      setTotalResults(data.pagination.total);
      setExplanation(data.query?.explanation || '');
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      setResults([]);
    } finally {
      setLoading(false);
    }
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter') {
      handleSearch();
    }
  };

  const formatCurrency = (value: number) => {
    return new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    }).format(value);
  };

  return (
    <div className="property-search">
      <div className="search-hero">
        <div className="search-header">
          <h1>TCAD Property Explorer</h1>
          <p className="subtitle">Search 122,000+ Travis County properties using natural language</p>
        </div>

        <div className="search-container">
          <div className="search-box">
            <div className="search-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.35-4.35" />
              </svg>
            </div>
            <input
              type="text"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              onKeyPress={handleKeyPress}
              placeholder="Ask anything... e.g., 'properties in Austin worth over $500k'"
              className="search-input"
              disabled={loading}
            />
            <button
              onClick={() => handleSearch()}
              disabled={loading || !searchQuery.trim()}
              className="search-button"
            >
              {loading ? 'Searching...' : 'Search'}
            </button>
          </div>

          <div className="example-queries">
            <span className="example-label">Try:</span>
            {exampleQueries.map((example, idx) => (
              <button
                key={idx}
                onClick={() => {
                  setSearchQuery(example);
                  handleSearch(example);
                }}
                className="example-chip"
                disabled={loading}
              >
                {example}
              </button>
            ))}
          </div>
        </div>
      </div>

      {explanation && (
        <div className="search-explanation">
          <div className="explanation-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M9 18l6-6-6-6" />
            </svg>
          </div>
          <span>{explanation}</span>
          <span className="result-count">({totalResults} results)</span>
        </div>
      )}

      {error && (
        <div className="error-message">
          <strong>Error:</strong> {error}
        </div>
      )}

      {results.length > 0 && (
        <div className="results-section">
          <div className="results-grid">
            {results.map((property) => (
              <div key={property.id} className="property-card">
                <div className="property-header">
                  <h3 className="property-owner">{property.name}</h3>
                  <span className="property-type-badge">{property.prop_type}</span>
                </div>
                <div className="property-address">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
                    <circle cx="12" cy="10" r="3" />
                  </svg>
                  {property.property_address}
                  {property.city && `, ${property.city}`}
                </div>
                <div className="property-details">
                  <div className="detail-item">
                    <span className="detail-label">Appraised Value</span>
                    <span className="detail-value">{formatCurrency(property.appraised_value)}</span>
                  </div>
                  {property.assessed_value && (
                    <div className="detail-item">
                      <span className="detail-label">Assessed Value</span>
                      <span className="detail-value">{formatCurrency(property.assessed_value)}</span>
                    </div>
                  )}
                  <div className="detail-item">
                    <span className="detail-label">Property ID</span>
                    <span className="detail-value mono">{property.property_id}</span>
                  </div>
                </div>
              </div>
            ))}
          </div>

          {results.length < totalResults && (
            <div className="load-more">
              <p>Showing {results.length} of {totalResults} results</p>
              <button className="load-more-button">Load More</button>
            </div>
          )}
        </div>
      )}

      {!loading && !error && results.length === 0 && searchQuery && (
        <div className="no-results">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="11" cy="11" r="8" />
            <path d="m21 21-4.35-4.35" />
          </svg>
          <h3>No properties found</h3>
          <p>Try adjusting your search query or using one of the examples above</p>
        </div>
      )}
    </div>
  );
}
</file>

<file path="PropertyTable.css">
.property-table-container {
  max-width: 1200px;
  margin: 0 auto;
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: var(--shadow);
}

.table-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  flex-wrap: wrap;
  gap: 16px;
}

.table-header h2 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--neutral-800);
}

.table-controls {
  display: flex;
  align-items: center;
  gap: 24px;
  flex-wrap: wrap;
}

.page-size-control {
  display: flex;
  align-items: center;
  gap: 8px;
}

.page-size-control label {
  font-size: 0.875rem;
  color: var(--neutral-600);
  font-weight: 500;
}

.page-size-control select {
  padding: 6px 32px 6px 10px;
  border: 1px solid var(--neutral-300);
  border-radius: 6px;
  font-size: 0.875rem;
  color: var(--neutral-900);
  background-color: white;
  cursor: pointer;
  transition: border-color 0.2s;
}

.page-size-control select:focus {
  outline: none;
  border-color: var(--primary);
}

.results-info {
  font-size: 0.875rem;
  color: var(--neutral-600);
}

.table-wrapper {
  overflow-x: auto;
  margin-bottom: 24px;
  border: 1px solid var(--neutral-200);
  border-radius: 8px;
}

.property-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
}

.property-table thead {
  background-color: var(--neutral-50);
  border-bottom: 2px solid var(--neutral-200);
}

.property-table th {
  padding: 12px 16px;
  text-align: left;
  font-weight: 600;
  color: var(--neutral-700);
  white-space: nowrap;
  user-select: none;
}

.property-table th.sortable {
  cursor: pointer;
  transition: background-color 0.2s;
}

.property-table th.sortable:hover {
  background-color: var(--neutral-100);
}

.property-table th.numeric {
  text-align: right;
}

.sort-icon {
  margin-left: 4px;
  color: var(--neutral-400);
  font-size: 0.75rem;
}

.sort-icon.active {
  color: var(--primary);
}

.property-table tbody tr {
  border-bottom: 1px solid var(--neutral-100);
  transition: background-color 0.2s;
}

.property-table tbody tr:hover {
  background-color: var(--neutral-50);
}

.property-table td {
  padding: 16px;
  color: var(--neutral-800);
}

.property-table td.numeric {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.property-table td.no-data {
  text-align: center;
  padding: 48px 16px;
  color: var(--neutral-500);
  font-style: italic;
}

.owner-name {
  font-weight: 500;
}

.property-type-badge {
  display: inline-block;
  padding: 4px 8px;
  background-color: var(--neutral-100);
  color: var(--neutral-700);
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.property-id {
  font-family: 'Courier New', monospace;
  font-size: 0.8125rem;
  color: var(--neutral-600);
}

.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.page-numbers {
  display: flex;
  gap: 4px;
}

.page-btn {
  padding: 8px 12px;
  border: 1px solid var(--neutral-300);
  background-color: white;
  color: var(--neutral-700);
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  min-width: 40px;
}

.page-btn:hover:not(:disabled) {
  background-color: var(--neutral-50);
  border-color: var(--neutral-400);
}

.page-btn.active {
  background-color: var(--primary);
  color: white;
  border-color: var(--primary);
}

.page-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

@media (max-width: 768px) {
  .property-table-container {
    padding: 16px;
  }

  .table-header {
    flex-direction: column;
    align-items: flex-start;
  }

  .table-controls {
    width: 100%;
    justify-content: space-between;
  }

  .property-table {
    font-size: 0.8125rem;
  }

  .property-table th,
  .property-table td {
    padding: 10px 12px;
  }

  .pagination {
    gap: 4px;
  }

  .page-btn {
    padding: 6px 10px;
    font-size: 0.8125rem;
    min-width: 36px;
  }
}
</file>

<file path="PropertyTable.tsx">
import { useState, useMemo } from 'react';
import { Property } from '../types';
import './PropertyTable.css';

interface PropertyTableProps {
  properties: Property[];
}

type SortField = 'name' | 'property_address' | 'city' | 'appraised_value' | 'assessed_value' | 'prop_type';
type SortDirection = 'asc' | 'desc';

function PropertyTable({ properties }: PropertyTableProps) {
  const [sortField, setSortField] = useState<SortField>('appraised_value');
  const [sortDirection, setSortDirection] = useState<SortDirection>('desc');
  const [currentPage, setCurrentPage] = useState(1);
  const [pageSize, setPageSize] = useState(25);

  const sortedProperties = useMemo(() => {
    const sorted = [...properties].sort((a, b) => {
      let aVal: string | number = a[sortField] ?? '';
      let bVal: string | number = b[sortField] ?? '';

      if (typeof aVal === 'string') aVal = aVal.toLowerCase();
      if (typeof bVal === 'string') bVal = bVal.toLowerCase();

      if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1;
      if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1;
      return 0;
    });

    return sorted;
  }, [properties, sortField, sortDirection]);

  const paginatedProperties = useMemo(() => {
    const startIndex = (currentPage - 1) * pageSize;
    return sortedProperties.slice(startIndex, startIndex + pageSize);
  }, [sortedProperties, currentPage, pageSize]);

  const totalPages = Math.ceil(sortedProperties.length / pageSize);

  const handleSort = (field: SortField) => {
    if (sortField === field) {
      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');
    } else {
      setSortField(field);
      setSortDirection('asc');
    }
    setCurrentPage(1);
  };

  const formatCurrency = (value: number) => {
    return new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    }).format(value);
  };

  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
    });
  };

  const SortIcon = ({ field }: { field: SortField }) => {
    if (sortField !== field) {
      return <span className="sort-icon"></span>;
    }
    return <span className="sort-icon active">{sortDirection === 'asc' ? '' : ''}</span>;
  };

  return (
    <div className="property-table-container">
      <div className="table-header">
        <h2>Property Records</h2>
        <div className="table-controls">
          <div className="page-size-control">
            <label htmlFor="pageSize">Show:</label>
            <select
              id="pageSize"
              value={pageSize}
              onChange={(e) => {
                setPageSize(Number(e.target.value));
                setCurrentPage(1);
              }}
            >
              <option value={10}>10</option>
              <option value={25}>25</option>
              <option value={50}>50</option>
              <option value={100}>100</option>
            </select>
          </div>
          <div className="results-info">
            Showing {paginatedProperties.length > 0 ? (currentPage - 1) * pageSize + 1 : 0} - {Math.min(currentPage * pageSize, sortedProperties.length)} of {sortedProperties.length} properties
          </div>
        </div>
      </div>

      <div className="table-wrapper">
        <table className="property-table">
          <thead>
            <tr>
              <th onClick={() => handleSort('name')} className="sortable">
                Owner Name <SortIcon field="name" />
              </th>
              <th onClick={() => handleSort('property_address')} className="sortable">
                Address <SortIcon field="property_address" />
              </th>
              <th onClick={() => handleSort('city')} className="sortable">
                City <SortIcon field="city" />
              </th>
              <th onClick={() => handleSort('prop_type')} className="sortable">
                Type <SortIcon field="prop_type" />
              </th>
              <th onClick={() => handleSort('appraised_value')} className="sortable numeric">
                Appraised Value <SortIcon field="appraised_value" />
              </th>
              <th onClick={() => handleSort('assessed_value')} className="sortable numeric">
                Assessed Value <SortIcon field="assessed_value" />
              </th>
              <th>Property ID</th>
            </tr>
          </thead>
          <tbody>
            {paginatedProperties.length === 0 ? (
              <tr>
                <td colSpan={7} className="no-data">
                  No properties found matching your filters
                </td>
              </tr>
            ) : (
              paginatedProperties.map((property) => (
                <tr key={property.id}>
                  <td className="owner-name">{property.name}</td>
                  <td>{property.property_address}</td>
                  <td>{property.city || '-'}</td>
                  <td>
                    <span className="property-type-badge">{property.prop_type}</span>
                  </td>
                  <td className="numeric">{formatCurrency(property.appraised_value)}</td>
                  <td className="numeric">{formatCurrency(property.assessed_value)}</td>
                  <td className="property-id">{property.property_id}</td>
                </tr>
              ))
            )}
          </tbody>
        </table>
      </div>

      {totalPages > 1 && (
        <div className="pagination">
          <button
            onClick={() => setCurrentPage(1)}
            disabled={currentPage === 1}
            className="page-btn"
          >
            First
          </button>
          <button
            onClick={() => setCurrentPage(p => Math.max(1, p - 1))}
            disabled={currentPage === 1}
            className="page-btn"
          >
            Previous
          </button>

          <div className="page-numbers">
            {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {
              let pageNum: number;
              if (totalPages <= 5) {
                pageNum = i + 1;
              } else if (currentPage <= 3) {
                pageNum = i + 1;
              } else if (currentPage >= totalPages - 2) {
                pageNum = totalPages - 4 + i;
              } else {
                pageNum = currentPage - 2 + i;
              }

              return (
                <button
                  key={pageNum}
                  onClick={() => setCurrentPage(pageNum)}
                  className={`page-btn ${currentPage === pageNum ? 'active' : ''}`}
                >
                  {pageNum}
                </button>
              );
            })}
          </div>

          <button
            onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}
            disabled={currentPage === totalPages}
            className="page-btn"
          >
            Next
          </button>
          <button
            onClick={() => setCurrentPage(totalPages)}
            disabled={currentPage === totalPages}
            className="page-btn"
          >
            Last
          </button>
        </div>
      )}
    </div>
  );
}

export default PropertyTable;
</file>

<file path="README.md">
# components

## Overview

This directory contains 5 code file(s) with extracted schemas.

## Files and Schemas

### `Analytics.tsx` (typescript)

**Classes:**
- `AnalyticsProps` - Line 5

**Functions:**
- `Analytics({ properties })` - Line 9

**Key Imports:** `../types`, `react`

### `Charts.tsx` (typescript)

**Classes:**
- `ChartsProps` - Line 5

**Functions:**
- `Charts({ properties })` - Line 9

**Key Imports:** `../types`, `react`

### `Filters.tsx` (typescript)

**Classes:**
- `FiltersProps` - Line 5

**Functions:**
- `Filters({ properties, onFilterChange })` - Line 10

**Key Imports:** `../types`, `react`

### `PropertyTable.tsx` (typescript)

**Classes:**
- `PropertyTableProps` - Line 5

**Functions:**
- `PropertyTable({ properties })` - Line 12

**Key Imports:** `../types`, `react`

### `ScrapeManager.tsx` (typescript)

**Classes:**
- `ScrapeManagerProps` - Line 5

**Key Imports:** `../services/api.service`, `react`

---
*Generated by Schema Generator*
</file>

<file path="ScrapeManager.css">
.scrape-manager {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.scrape-input-section {
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  margin-bottom: 24px;
}

.scrape-input-section h2 {
  margin: 0 0 20px 0;
  color: #1f2937;
  font-size: 24px;
}

.search-controls {
  display: flex;
  gap: 12px;
  align-items: center;
}

.search-input {
  flex: 1;
  padding: 12px 16px;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  font-size: 16px;
  transition: border-color 0.2s;
}

.search-input:focus {
  outline: none;
  border-color: #3b82f6;
}

.search-input:disabled {
  background-color: #f3f4f6;
  cursor: not-allowed;
}

.scrape-button {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.scrape-button.primary {
  background: #3b82f6;
  color: white;
}

.scrape-button.primary:hover:not(:disabled) {
  background: #2563eb;
}

.scrape-button.secondary {
  background: #10b981;
  color: white;
}

.scrape-button.secondary:hover:not(:disabled) {
  background: #059669;
}

.scrape-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.error-message {
  margin-top: 12px;
  padding: 12px;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 6px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.job-status-card {
  margin-top: 20px;
  padding: 16px;
  background: #f9fafb;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.job-status-card h3 {
  margin: 0 0 12px 0;
  font-size: 18px;
  color: #374151;
}

.status-info {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.status-badge {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 16px;
  color: white;
  font-size: 12px;
  font-weight: 600;
  text-align: center;
  width: fit-content;
}

.status-badge.small {
  padding: 2px 8px;
  font-size: 11px;
}

.progress-bar-container {
  position: relative;
  height: 24px;
  background: #e5e7eb;
  border-radius: 12px;
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #2563eb);
  transition: width 0.3s ease;
}

.progress-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 12px;
  font-weight: 600;
  color: #1f2937;
}

.result-count {
  font-size: 16px;
  color: #059669;
  font-weight: 600;
}

.job-error {
  padding: 8px 12px;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 6px;
  font-size: 14px;
}

.scrape-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
}

.tab-button {
  padding: 10px 20px;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.tab-button:hover {
  border-color: #3b82f6;
  color: #3b82f6;
}

.tab-button.active {
  background: #3b82f6;
  color: white;
  border-color: #3b82f6;
}

.history-section,
.monitored-section {
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.history-section h3,
.monitored-section h3 {
  margin: 0 0 20px 0;
  color: #1f2937;
  font-size: 20px;
}

.no-data {
  text-align: center;
  color: #9ca3af;
  padding: 40px;
  font-size: 16px;
}

.history-list,
.monitored-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.history-item,
.monitored-item {
  padding: 16px;
  background: #f9fafb;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.history-header,
.monitored-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.search-term {
  font-weight: 600;
  color: #1f2937;
  font-size: 16px;
}

.frequency-badge {
  padding: 4px 12px;
  background: #6366f1;
  color: white;
  border-radius: 16px;
  font-size: 12px;
  font-weight: 600;
}

.history-details,
.monitored-details {
  display: flex;
  gap: 16px;
  font-size: 14px;
  color: #6b7280;
}

.history-error {
  margin-top: 8px;
  padding: 8px;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 4px;
  font-size: 13px;
}

@media (max-width: 768px) {
  .search-controls {
    flex-direction: column;
  }

  .search-input {
    width: 100%;
  }

  .scrape-button {
    width: 100%;
  }

  .history-details,
  .monitored-details {
    flex-direction: column;
    gap: 4px;
  }
}
</file>

<file path="ScrapeManager.tsx">
import React, { useState, useEffect } from 'react';
import { propertyAPI, JobStatus, ScrapeHistory, MonitoredSearch } from '../services/api.service';
import './ScrapeManager.css';
import logger from '../lib/logger';

interface ScrapeManagerProps {
  onScrapeComplete?: () => void;
}

export const ScrapeManager: React.FC<ScrapeManagerProps> = ({ onScrapeComplete }) => {
  const [searchTerm, setSearchTerm] = useState('');
  const [currentJob, setCurrentJob] = useState<JobStatus | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [scrapeHistory, setScrapeHistory] = useState<ScrapeHistory[]>([]);
  const [monitoredSearches, setMonitoredSearches] = useState<MonitoredSearch[]>([]);
  const [showHistory, setShowHistory] = useState(false);
  const [showMonitored, setShowMonitored] = useState(false);

  useEffect(() => {
    loadScrapeHistory();
    loadMonitoredSearches();
  }, []);

  const loadScrapeHistory = async () => {
    try {
      const response = await propertyAPI.getScrapeHistory(10, 0);
      setScrapeHistory(response.data);
    } catch (err) {
      logger.error('Failed to load scrape history:', err);
    }
  };

  const loadMonitoredSearches = async () => {
    try {
      const searches = await propertyAPI.getMonitoredSearches();
      setMonitoredSearches(searches);
    } catch (err) {
      logger.error('Failed to load monitored searches:', err);
    }
  };

  const handleScrape = async () => {
    if (!searchTerm.trim()) {
      setError('Please enter a search term');
      return;
    }

    setLoading(true);
    setError(null);
    setCurrentJob(null);

    try {
      // Trigger the scrape job
      const { jobId } = await propertyAPI.triggerScrape(searchTerm);

      // Poll for job status
      const finalStatus = await propertyAPI.pollJobStatus(
        jobId,
        (status) => {
          setCurrentJob(status);
        }
      );

      if (finalStatus.status === 'completed') {
        setError(null);
        if (onScrapeComplete) {
          onScrapeComplete();
        }
        // Reload history
        await loadScrapeHistory();
      } else if (finalStatus.status === 'failed') {
        setError(finalStatus.error || 'Scraping failed');
      }
    } catch (err: any) {
      setError(err.response?.data?.error || err.message || 'Failed to start scraping');
    } finally {
      setLoading(false);
    }
  };

  const handleAddMonitored = async () => {
    if (!searchTerm.trim()) {
      setError('Please enter a search term');
      return;
    }

    try {
      await propertyAPI.addMonitoredSearch(searchTerm, 'daily');
      await loadMonitoredSearches();
      setSearchTerm('');
      setError(null);
    } catch (err: any) {
      setError(err.response?.data?.error || 'Failed to add monitored search');
    }
  };

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'completed':
        return '#10b981';
      case 'failed':
        return '#ef4444';
      case 'processing':
      case 'active':
        return '#3b82f6';
      default:
        return '#6b7280';
    }
  };

  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleString();
  };

  return (
    <div className="scrape-manager">
      <div className="scrape-input-section">
        <h2>Property Search & Scraping</h2>
        <div className="search-controls">
          <input
            type="text"
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && handleScrape()}
            placeholder="Enter search term (e.g., owner name, address)"
            className="search-input"
            disabled={loading}
          />
          <button
            onClick={handleScrape}
            disabled={loading || !searchTerm.trim()}
            className="scrape-button primary"
          >
            {loading ? 'Scraping...' : 'Start Scraping'}
          </button>
          <button
            onClick={handleAddMonitored}
            disabled={loading || !searchTerm.trim()}
            className="scrape-button secondary"
            title="Add to daily monitoring"
          >
            Monitor Daily
          </button>
        </div>

        {error && (
          <div className="error-message">
            <span> {error}</span>
          </div>
        )}

        {currentJob && (
          <div className="job-status-card">
            <h3>Current Job Status</h3>
            <div className="status-info">
              <div className="status-badge" style={{ backgroundColor: getStatusColor(currentJob.status) }}>
                {currentJob.status.toUpperCase()}
              </div>
              {currentJob.progress !== undefined && currentJob.progress > 0 && (
                <div className="progress-bar-container">
                  <div
                    className="progress-bar-fill"
                    style={{ width: `${currentJob.progress}%` }}
                  />
                  <span className="progress-text">{currentJob.progress}%</span>
                </div>
              )}
              {currentJob.resultCount !== undefined && (
                <div className="result-count">
                  Found {currentJob.resultCount} properties
                </div>
              )}
              {currentJob.error && (
                <div className="job-error">
                  Error: {currentJob.error}
                </div>
              )}
            </div>
          </div>
        )}
      </div>

      <div className="scrape-tabs">
        <button
          className={`tab-button ${showHistory ? 'active' : ''}`}
          onClick={() => {
            setShowHistory(!showHistory);
            setShowMonitored(false);
          }}
        >
          Recent Scrapes ({scrapeHistory.length})
        </button>
        <button
          className={`tab-button ${showMonitored ? 'active' : ''}`}
          onClick={() => {
            setShowMonitored(!showMonitored);
            setShowHistory(false);
          }}
        >
          Monitored Searches ({monitoredSearches.length})
        </button>
      </div>

      {showHistory && (
        <div className="history-section">
          <h3>Recent Scrape History</h3>
          {scrapeHistory.length === 0 ? (
            <p className="no-data">No scraping history yet</p>
          ) : (
            <div className="history-list">
              {scrapeHistory.map((job) => (
                <div key={job.id} className="history-item">
                  <div className="history-header">
                    <span className="search-term">{job.searchTerm}</span>
                    <span
                      className="status-badge small"
                      style={{ backgroundColor: getStatusColor(job.status) }}
                    >
                      {job.status}
                    </span>
                  </div>
                  <div className="history-details">
                    <span>Started: {formatDate(job.startedAt)}</span>
                    {job.resultCount !== null && (
                      <span>Results: {job.resultCount}</span>
                    )}
                    {job.completedAt && (
                      <span>Completed: {formatDate(job.completedAt)}</span>
                    )}
                  </div>
                  {job.error && (
                    <div className="history-error">Error: {job.error}</div>
                  )}
                </div>
              ))}
            </div>
          )}
        </div>
      )}

      {showMonitored && (
        <div className="monitored-section">
          <h3>Monitored Searches</h3>
          {monitoredSearches.length === 0 ? (
            <p className="no-data">No monitored searches configured</p>
          ) : (
            <div className="monitored-list">
              {monitoredSearches.map((search) => (
                <div key={search.id} className="monitored-item">
                  <div className="monitored-header">
                    <span className="search-term">{search.searchTerm}</span>
                    <span className="frequency-badge">{search.frequency}</span>
                  </div>
                  <div className="monitored-details">
                    {search.lastRun && (
                      <span>Last run: {formatDate(search.lastRun)}</span>
                    )}
                    <span>Added: {formatDate(search.createdAt)}</span>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      )}
    </div>
  );
};

export default ScrapeManager;
</file>

</files>
